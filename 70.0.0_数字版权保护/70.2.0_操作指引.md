## 使用须知

1. 使用数字版权保护工具加固后必须先进行自测，确认无误后方可发布;
2. 如果要获取自助加固工具可前往[控制台](#/console/overview)或<a href="https://admin.qidian.qq.com/template/blue/mp/menu/qr-code-jump.html?linkType=0&env=ol&kfuin=2852167644&fid=28&key=d81ab0145faf07ade8b35f63efae4464&cate=1&type=16&ftype=1&_type=wpa&qidian=true" target="_blank">联系客服</a>；
3. 如果加固过程中出现了失败，可前往加固[错误码](#/doc-center/401573571e7e8947772815933e634714b7d02807)页面查看错误提示；

## 命令行模式

数字版权保护加固工具和开发商绑定，内置了私钥证书，需要妥善保存，防止泄露。

数字版权保护加固工具支持两种模式，命令行模式、交互模式。命令行模式多用于持续集成，交互模式多用于测试。

![](/docs/ACE-doc/70_shellservice-sp/20/1.png )

<span class="legend">图1：工具组件</span>

## 工具参数说明

#### 调用方法：（参数说明）

```bash
AutoProtect.exe upload --input <input path> --output <output path>--game_id <game id> -
-platform <platform> --verification_mode <mode>
```

#### 示例：

![](/docs/ACE-doc/70_shellservice-sp/20/2.png )

<span class="legend">图2：PC加固</span>

![](/docs/ACE-doc/70_shellservice-sp/20/3.png )

<span class="legend">图3：Android加固</span>

## 交互模式

#### 使用方法：

1. 启动AutoProtect.ext（双击启动）；
2. 按照提示输入命令；

#### 示例：

![](/docs/ACE-doc/70_shellservice-sp/20/4.png)

<span class="legend">图4：双击启动AutoProtect.exe</span>

![](/docs/ACE-doc/70_shellservice-sp/20/5.png)

<span class="legend">图5：查看帮助</span>

![](/docs/ACE-doc/70_shellservice-sp/20/6.png)

<span class="legend">图6：PC加固</span>

![](/docs/ACE-doc/70_shellservice-sp/20/7.png)

<span class="legend">图7：Android加固</span>

## 加固参数

|参数 |含义 |特别说明 |
|----|-----|-----|
|--intput |待加固exe/apk文件的完整路径，路径必须用“”包含 |exe/apk所在的目录必须满足以下要求<br>如果是Unity引擎开发的Windows软件：<br><br><br>- 1. 需要保证目录所在的游戏文件必须是完整的，即是该目录下的游戏能够正常启动运行<br>- 2. 需要保证目录下的文件都是预期的，比如测试时替换了某组件，加固时需要注意还原<br><br><br>如果是C/C++或其他引擎开发的Windows软件：<br><br><br>- 1. 需要保证该目录下存在与之对应的map文件，关于如何生成map文件可以参考对应的IDE说明或者咨询ACE DRM团队<br>- 2. 如果基于Android系统的APK加固, 需要保证即将加固的APK能够正常安装并运行 |
|--output |加固后生成的压缩包目录路径，路径必须用“”包含 |/ |
|--game_id |游戏ID（与发行平台有关） |若发行平台是WeGame、Steam，填写平台分配的AppID/GameID<br>若使用APK加固，该参数无意义，可忽略；<br>若无发行平台，可<a href="https://admin.qidian.qq.com/template/blue/mp/menu/qr-code-jump.html?linkType=0&env=ol&kfuin=2852167644&fid=28&key=d81ab0145faf07ade8b35f63efae4464&cate=1&type=16&ftype=1&_type=wpa&qidian=true" target="_blank">联系客服</a>或ACE-DRM团队 |
|--platform |发行平台的名称，目前支持 steam 、wegame、googleplay 三种 |/ |
|--verification_mode |（目前仅支持Android，PC加固可忽略）验证模式，支持none, basic, pro三种模式 |none：只加固，不做任何验证，仅适用于不需要反盗版的场景；<br>basic：弱验证，本地与平台服务器交互验证，对网络环境要求低，适用于用户体验大于反盗版需求场景；<br>pro：强验证，本地、平台服务器、安全服务器交叉验证，对网络环境要求较高，适用于反盗版需求强烈场景； |

## 数字签名及发布

- 加固会破坏原始文件的数字签名，因此请在加固后重新打数字签名。
- 加固时会默认对安全组件（即是新增的组件）加安全侧的数字签名，如果不需要安全侧的数字签名，再次打自己的数字签名即可覆盖安全侧的数字签名。
- 加固后生成的文件一个都不能少，不能擅自删除其中的文件，需要完整覆盖到原始游戏目录。