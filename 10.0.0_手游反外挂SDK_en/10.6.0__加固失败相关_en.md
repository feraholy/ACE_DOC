#### Reinforcement Failure

##### Q1. The game failed to be reinforced, and the error message "[!]errno:23, strerror: CMDID_UPLOADING_ERROR, detail:request upload apk failed" was displayed. Why?

W: possible causes:

1. CMD froze when the program was started through it, resulting in the request failure. You can select Windows > CMD > Properties > Options > Edit Options to cancel the Quick Edit mode.
2. Network problems such as congestion caused a network disconnection, resulting in the request failure. For more information on the specific failure, please see [here](https://curl.haxx.se/libcurl/c/libcurl-errors.html).
3. The reinforcement command contained a Chinese character. 
4. If batch reinforcement failed, you can troubleshoot as instructed in [Q17](#Q17.-The-game-failed-to-be-reinforced,-and-the-error-message-"[!]errno:69,-strerror:-CMDID_RUN_MERGE_APK_FAILURE"-was-displayed.-Why?).
 
A: solutions: 
 
1. Cancel the Quick Edit mode in Windows > CMD > Properties > Options > Edit Options. 
2. Check the current network speed. 
3. Check whether the reinforcement command contains Chinese characters. 
 
##### Q2. The game failed to be reinforced, and the error message "parsing tpshell-config.xml failed and version is null" was displayed. Why?
 
A: possible causes: 
 
1. The extension of the configuration file during reinforcement wasn't .xml, or the configuration file didn't contain the `TPVersion` field.
2. The configuration file path entered on the command line contained a Chinese character. 
3. The `TPVersion` field in the configuration file of the command line-based reinforcement tool wasn't the default value. Do not arbitrarily change the value.
 
##### Q3. The game failed to be reinforced, and the error message "Shelling adds about 50 java methods /field/string/type thus total ids over 65535" was displayed. Why?
 
A: the game itself needs to support multidex. For more information, please see [here](https://developer.android.com/studio/build/multidex). If the game supports multidex, you need to use the latest version of the command line-based reinforcement tool for reinforcement. 
 
##### Q4. The game failed to be reinforced, and the error message "Parsing config failed, config invalid" was displayed. Why?
 
A: legacy versions of the command-line based reinforcement tool don't support uploading files larger than 2 GB on 32-bit Windows and Linux. We recommend you use the latest version of the tool for reinforcement.
 
##### Q5. The game failed to be reinforced, and the error message "invalid param select_info" was displayed. Why?
 
A: the name of a file in the installation package to be reinforced contained a special symbol "&". We recommend you use the latest version of the command line-based reinforcement tool for reinforcement.
 
##### Q6. The game failed to be reinforced, and the error message "ELF is debug so with symbols and Elf is illegal alignment" was displayed. Why?
 
A: the .so file to be reinforced didn't contain the `.init_array` node. The solution is to release .so files for reinforcement. The .so file protection feature requires that .so files to be reinforced contain the `.init_array` node. There may be two reasons why a .so file doesn't contain the `.init_array` node: 
 
1. It is a .so file that comes with the engine, such as the `libmain.so` file, which is irrelevant to the game logic. We recommend you not encrypt this file in your game. 
2. It is a core logic .so file developed for the game. In this case, you can modify the corresponding project (for example, you can add a placeholder function with the `__attribute__((constructor))` tag with no actual logic) to make the compiled .so file contain the `.init_array` node as follows: 
 
```c 
__attribute__((constructor,visibility("hidden"))) void init_array_0(void) { 
    printf("%s" , __FUNCTION__); 
} 
__attribute__((constructor,visibility("hidden")))void init_func_0(void) { 
    printf("%s" , __FUNCTION__); 
} 
``` 
 
##### Q7. The game failed to be reinforced, and the error message "certPath parmeter error, please provide valid cert file" was displayed. Why? 
 
A: possible causes: 
 
1. The `Game_ID.cert` certificate file expired. 
2. The certificate path entered on the command line contained a Chinese character. 
 
##### Q8. The game failed to be reinforced, and the error message "[!]errno:15, strerror: Lib so file invalid" was displayed. Why?
 
A: legacy versions of the tool don't support debugging .so files for reinforcement. We recommend you use the latest version of the tool for reinforcement.
 
##### Q9. The game failed to be reinforced, and the error message "Failed to extract the application name" was displayed. Why? 
 
A: the installation package wasn't a valid .zip file or the installation package didn't contain the game application name. For the possible causes, you can contact the customer service to get the analysis document. 
 
##### Q10. The game failed to be reinforced, and the error message "XGApplication not found" was displayed. Why? 
 
A: if `XGApplication` isn't declared in the primary DEX file, reinforcement will fail. The latest version of the command line-based reinforcement tool has eliminated this problem.
 
##### Q11. A UE4 game failed to be reinforced when LLD was used. Why? 
 
A: you can contact the customer service and modify `GameActivity.java.template` to move `System.loadLibrary("UE4");` to the last line in the `static` node as follows: 
 
```c 
static 
{         
        //$${soLoadLibrary}$$ 
        System.loadLibrary("c++_shared"); 
        System.loadLibrary("UE4"); 
} 
``` 
 
##### Q12. An iOS game failed to be reinforced, and the error message "DWARF doesn't exist" was displayed. Why? 
 
A: DWARF must be generated. Configure the following two options in the settings: 
 
```xml 
XCode -> Build Settings -> Build Option -> Debug Information Format -> DWARF with dSYM File 
 
XCode -> Build Settings -> Apple Clang - Code Generation -> Generate Debug Symbols -> Yes 
``` 
 
##### Q13. The game failed to be reinforced, and the error message "[!]errno:29, strerror: CMDID_SHELLING_ERROR, detail:[3]Adding shelling duplicated..." was displayed. Why? 
 
A: you cannot reinforce a reinforced package again. 
 
##### Q14. The game failed to be reinforced, and the error message "[!]errno:31,strerror:CMDID_DOWNLOAD_APK_ERROR,detail: curl retval:23 http retcode:0" was displayed. Why? 
 
A: local file write caused this failure. Possible causes include: 
 
1. The output directory permission wasn't writable. 
2. The disk space was insufficient. 
 
##### Q15. Alignment failed during signing when a game was packaged again, and the error message "Unable to open 'xxx.apk' as zip archive" was displayed. Why? 
 
A: this error is irrelevant to the reinforcement. It occurred as zipalign used by the game for resigning didn't support packages above 2 GB in size. We recommend you download zipalign provided by the latest version of the command line-based reinforcement tool.

##### Q16. The game failed to be reinforced, and the error message "errno:29, strerror: CMDID_SHELLING_ERROR, detail:game Game_ID is over speed(add shell task),please try again later." was displayed. Why?

A: to prevent DDoS attacks, the server backend sets a limit that up to 7 reinforcement tasks can be submitted in 1 minute for each `gameid`. If the submission frequency is too high, reinforcement will fail. Therefore, for each game, up to 7 reinforcement tasks can be submitted per minute, and excessive tasks will be limited, and a reinforcement failure will be returned. In this case, please try again later.

##### Q17. The game failed to be reinforced, and the error message "[!]errno:69, strerror: CMDID_RUN_MERGE_APK_FAILURE" was displayed. Why?

A: if you enable the ultra-fast upload feature, APKs will be merged locally during reinforcement. As APK merging during batch reinforcement may easily cause errors, we recommend you:

1. Enable no more than 10 concurrent threads (which can be adjusted based on the server performance) with an interval of at least 5s and use a thread pool to process a large number of installation packages in batches, as shelling involves many I/O operations, taking the server CPU and network bandwidth into consideration.
2. Use an independent directory for each reinforcement task.
3. Perform the reinforcement task again.

B. The version of the command line-based reinforcement tool is low, and its reinforcement configuration file doesn't support `TPVersion` values greater than 2.8.

##### Q18. The game failed to be reinforced, and the error message "[!]errno:69, strerror:CMDID_NETWORK_ERROR,detail:lite_shell" was displayed. Why?

A: the local network was exceptional. If this error occurs repeatedly during reinforcement, you can contact the customer service for assistance.

##### Q19. The game failed to be reinforced, and the error message "[!]errno:1025, detail:verify md5 of source APK file failed" was displayed. Why?

A: this is because that the uploaded APK file is incomplete. Please upload it again.

##### Q20. After game reinforcement, the warning "one arch can not find need encrypt so:xxx.so" was displayed. Why?

A: this is because that an architecture under the installation package didn't contain the .so file to be encrypted. According to Google's suggestions for developers, please keep the .so files under each architecture consistent. If no .so files exist under an architecture, you should delete the architecture folder or add an .so file.

##### Q21. The game failed to be reinforced, and the error message "[!]errno:31 , strerror: CMDID_DOWNLOAD_APK_ERROR, detail:Request download info failed" was displayed. Why?

A: the current network was exceptional, and the reinforced package failed to be downloaded. Please upload it again.

##### Q22. The game failed to be reinforced, and the error message "[!]errno:57,strerror:CMDID_NETWORK_ERROR,detail:login failed" was displayed. Why?

A: the current network was exceptional, and the login request failed.

##### Q23. After game reinforcement, the warning "xxx.so not found in file check protect selector!" was displayed. Why?

A: the latest version of the command line-based reinforcement tool checks whether all .so files under different architectures and .dex files in the `lib` directory in the installation package have been added to the verification list, and if not, it prints the files not in the verification list. We recommend you add other relevant files to the verification list. For the specific risks, please see the description of partial verification.

##### Q24. The game failed to be reinforced, and the error message "[!]errno:29, strerror: CMDID_SHELLING_ERROR, detail:[22]Shell failure, please Contact us" was displayed. Why? 

A: possible causes:

1. "Enable Security Build" was enabled when the package was compiled. This feature provides the encryption feature to encrypt and protect the main logic .dll files of the game. Currently, it conflicts with the reinforcement feature.

##### Q25. The game failed to be reinforced, and the error message "[!]Parse xml and error: XML_ERROR_PARSING_ATTRIBUTE" was displayed. Why?

A: an error occurred when the .xml configuration file was resolved. Check whether the corresponding tag pairs in the configuration file match.

##### Q26. After successful game reinforcement, the warning "check apk sign error, check MANIFEST.MF" was displayed. Why?

A: this is because that the signing tool used by the game (such as jarsigner) caused the command line-based reinforcement tool to fail to use apksigner to read the APK signature; therefore, the reinforcement tool read `meta-inf` again to check whether a signature file existed, which didn't affect the reinforcement.

##### Q27. The game failed to be reinforced, and the error message "[!]errno:29, strerror: CMDID_SHELLING_ERROR, detail:tp_shell_tool:default value is not available" was displayed. Why?

A: the `TPVersion` value in the configuration file entered during reinforcement was incorrect. For the specific value, please directly use the default value in the `tpshell-config.xm` file of the command line-based reinforcement tool.

##### Q28. After game reinforcement, the warning "It does not include java enc!!PLEASE CHECK!!Will not sign the apk/aab" was displayed. Why?

A: the tool path wasn't specified in the `ToolPath` field in the configuration file during reinforcement, which caused the reinforced package to fail to be signed and resulted in the installation package resolution error on the target installation device.

##### Q29. The game failed to be reinforced, and the error message "[!]Tool Path:your_tool_absolute non-exists" was displayed. Why?

A: spaces existed at the beginning and end of the value of the `ToolPath` field in the configuration during reinforcement. You can remove the spaces and reinforce again.

##### Q30. The game failed to be reinforced, and the error message "[!]please contact us for service trial" was displayed. Why?

A: you haven't purchased the relevant service. Please contact the customer service to apply for a trial.

##### Q31. The game failed to be reinforced, and the error message "[!]not registered game" was displayed. Why?

A: the game wasn't registered.

##### Q32. The game failed to be reinforced, and the error message "[!]unauthorized to the game" was displayed. Why?

A: you have no permissions of the game.

##### Q33. The game failed to be reinforced, and the error message "[!]authentication failed" was displayed. Why?

A: login verification failed.

##### Q34. After game reinforcement, the warning "Parsing config warned, choose more than 4 xx.so file to encrypt in your config,it may cause performance degradation when apk running" was displayed. Why?

A: we recommend you not encrypt too many .so and .dll files in the configuration file during reinforcement and only process the core game logic .so files.

##### Q35. The game failed to be reinforced, and the error message "[!]addshell_plugin process failed" was displayed. Why?

A: possible causes:

There were no specified entry classes in `Manifest.xml` in the APK.

##### Q36. The game crashed after being reinforced, and logcat prompted "Process <pid> exited cleanly(25)". Why?

A: the reinforcement feature detected that .so file decryption failed and forced the game to quit. Possible causes include:

1. The `libtprt.so` file in the reinforcement package was modified.
2. The installation package architecture changed after reinforcement.
3. The inheritance of the application changed. 

##### Q37. The game crashed after being reinforced, and logcat prompted "Process <pid> exited cleanly(30)". Why?

A: the reinforcement feature detected that a verified file was modified and forced the game to quit. Solution: use Beyond Compare to compare and analyze the channel package and base package to check which files in the channel package were modified.

##### Q38. The game failed to be reinforced, and the error message "[!]errno:74 , strerror: CMDID_RUN_TRANSEFET_AAB_TO_APKS_FAILED, detail:run aabtool extract failed" was displayed. Why?

A: the possible cause is that the value of the `ToolPath` field in the configuration file during reinforcement was incorrect, or the execution permission of the `tools` directory wasn't granted.

##### Q39. During game reinforcement, the prompt "[!]Because the channel business may modify the assets or files in other directories, the ful verification may cause the channel package to CRASH!" was displayed. Why?

A: this is because that the full resource verification feature was used during game reinforcement. In the subsequent packaging of channel packages, if `assets` in a channel package or another file in the installation package is modified, the reinforcement feature will be triggered, and the game installed from the channel package will be forced to quit during launch. This prompt doesn't affect the reinforcement process.

##### Q40. During game reinforcement, the prompt "[+]Found the il2cpp library, it is recommended that you provide symbol files for stronger protection!" was displayed. Why?

A: the reinforcement tool provides the `global-metadata.dat` runtime decryption feature. If only the `il2cpp.so` file is encrypted during game reinforcement, the tool will prompt accordingly, as the feature only supports v2.7 or above.

##### Q41. During game reinforcement, the prompt "[!]Parsing config warned, you select use default config." was displayed. Why?

A: this is because that the default configuration provided by the reinforcement tool was used during AAB game reinforcement; that is, `EncSo` and `EncDll` were empty lists or unspecified, and files such as `libmono.so`, `libil2cpp.so`, `AssemblyCSharp.dll`, and `Assembly-CSharp-firstpass.dll` were encrypted. This prompt doesn't affect the reinforcement.

##### Q42. Game reinforcement is stuck at `is_use_application_name`, and no direct reinforcement operations are performed. Why?

A: on the latest version of the command line-based reinforcement tool, you need to manually enter `true` or `false` during your first use. You can determine whether to enable this feature, and the game will be reinforced automatically subsequently.

##### Q43. The game failed to be reinforced, and the error message "Repeated shell protection" was displayed. Why?

A: the game was reinforced repeatedly. Please check whether the package to be reinforced contains the `libtprt.so` file.

##### Q44. During game reinforcement, the prompt "[!]Found libil2cpp.so that needs to be encrypted is not in all arches!It may cause some CRASHES!" was displayed. Why?

A: this is because that the `libil2cpp.so` file was encrypted during game reinforcement, but it wasn't found in the architecture in the package, which caused crashes on some devices. We recommend you add this .so file in other architectures of the game. This prompt doesn't affect the reinforcement.